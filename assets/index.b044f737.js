import{r as a,d as o,j as e,L as x,T as b,c as G,R as E,u as T,F as v,O as y,m as B}from"./index.d6c1f6e9.js";import{S as M}from"./index.16b90a01.js";import{S as P,T as h}from"./index.2cfb0e26.js";import{a as w,b as A,d as j}from"./index.4fb62c9d.js";import{M as O,P as R}from"./index.5323417d.js";import{N as V,S as $}from"./index.eda5ca45.js";import{G as q}from"./index.d91d0c8d.js";import"./attach-properties-to-component.6acef87d.js";import"./index.bd5de8c1.js";import"./index.d52acdb4.js";import"./use-isomorphic-update-layout-effect.0ef0381b.js";import"./request.0ea96a1b.js";import"./index.1deaab32.js";import"./bilibili.03841b80.js";import"./index.c3cca3ef.js";const H=({data:s,delDispatch:t})=>{const[r,n]=a.exports.useState(!1),[d,c]=a.exports.useState(!1),l=()=>{n(!1),c(!0)},u=async p=>{await t(p),b.show({content:"\u53D6\u6D88\u6536\u85CF\u6210\u529F",position:"bottom"}),n(!1)};return o("div",{className:"coll-container",children:[e("div",{className:"coll-img",children:e("img",{src:s.img,alt:""})}),o("div",{className:"coll-title",children:[s.info?e("span",{children:s.info}):"",e("span",{children:s.title})]}),o("div",{className:"coll-info",children:[e("div",{className:"rank",children:s.rank?e("span",{children:s.rank}):""}),e("div",{className:"time",children:s.time?e("span",{children:s.time}):""})]}),e("div",{className:"coll-price",children:o("span",{children:["\xA5",s.price]})}),e(x,{to:"/vip",children:o("div",{className:"vip",children:[e("span",{children:"\u4F1A\u5458\u8D2D"}),e("span",{children:"\u53BB\u901B\u901B > "})]})}),e(O,{className:"pop",onClick:()=>{n(!0)}}),o(R,{visible:r,onMaskClick:()=>{n(!1)},bodyStyle:{height:"7.6rem"},children:[e("div",{className:"share-btn",onClick:l,children:e("span",{children:"\u5206\u4EAB"})}),e("div",{className:"cancle-coll",onClick:()=>u(s.id),children:e("span",{children:"\u53D6\u6D88\u6536\u85CF"})}),e("div",{className:"bottom",onClick:()=>{n(!1)},children:e("span",{children:"\u53D6\u6D88"})})]}),e(P,{visible:d,setVisible:c})]})};const I=()=>e(g,{}),g=()=>o("div",{className:"nothing",children:[e("img",{src:y,alt:""}),e("p",{children:"\u256E(\u256F\uFE4F\u2570\uFF09\u256D\u518D\u600E\u4E48\u627E\u4E5F\u6CA1\u6709\u5566"})]}),f=()=>o("div",{className:"other",children:[e("span",{children:"\u4F60\u53EF\u80FD\u8FD8\u559C\u6B22"}),e("p",{})]}),K=s=>{const{goodsList:t,enterLoading:r,collectGoodsList:n}=s,{getGoodListDispatch:d,addDispatch:c,delDispatch:l}=s,[u,p]=a.exports.useState(!0),[C,D]=a.exports.useState([]),[m,N]=a.exports.useState(0),F=T();a.exports.useEffect(()=>{d()},[]);async function L(){return m>=5?[]:(await B(1e3),N(i=>i+1),t.map(i=>m>=1?{...i,id:i.id+=t.length}:{...i}))}async function S(){const i=await L();D(k=>[...k,...i]),p(i.length>0)}return o("div",{className:"collect-container",children:[o("div",{className:"header",children:[e("i",{className:"iconfont icon-fanhuijiantou",onClick:()=>F(-1)}),e("span",{children:"\u6211\u7684\u6536\u85CF"})]}),o(h,{defaultActiveKey:"goods",children:[o(h.Tab,{title:"\u89C6\u9891",children:[e(I,{}),e(f,{})]},"videos"),o(h.Tab,{title:"\u5546\u54C1",children:[n.length>0?e(v,{children:n.map(i=>e(H,{data:i,delDispatch:l},i.id))}):e(g,{}),e(f,{}),r?e(M.Paragraph,{lineCount:20,animated:!0}):o(v,{children:[e(q,{goodData:C,addDispatch:c,delDispatch:l}),e(V,{loadMore:S,hasMore:u})]}),e($,{top:3e3})]},"goods")]})]})},z=s=>({enterLoading:s.vip.enterLoading,goodsList:s.vip.goodsList,collectGoodsList:s.vip.collectGoodsList}),J=s=>({getGoodListDispatch(){s(w())},addDispatch(t){s(A(t))},delDispatch(t){s(j(t))}});var le=G(z,J)(E.memo(K));export{le as default};
