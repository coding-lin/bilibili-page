import{r as c,d as o,j as e,L as f,T as D,c as y,R as x,u as M,F as v,m as P,h as w}from"./index-1f87f03b.js";import{S as j}from"./index-c553d56e.js";import{T as h}from"./index-fdf96a3e.js";import{a as E,b as R,d as V}from"./actionCreators-85d1cb0f.js";import{P as $}from"./popup-0a9f3ee4.js";import{S as F}from"./index-ba572c6c.js";import{M as O}from"./MoreOutline-379060ab.js";import{N as q,S as A}from"./index-7c8b971b.js";import{G as H}from"./index-02489b48.js";import"./attach-properties-to-component-a2c66ef2.js";import"./index-9637c332.js";import"./index-7e947965.js";import"./use-isomorphic-update-layout-effect-2b311c5b.js";import"./request-9f981471.js";import"./dot-loading-c9c6c601.js";import"./index-ae2775d6.js";import"./index-c5138b0e.js";import"./bilibili-b956cdd9.js";const I=({data:s,delDispatch:t})=>{const[r,n]=c.useState(!1),[d,a]=c.useState(!1),l=()=>{n(!1),a(!0)},p=async m=>{await t(m),D.show({content:"取消收藏成功",position:"bottom"}),n(!1)};return o("div",{className:"coll-container",children:[e(f,{to:`/vip/good/${s.id}`,children:e("div",{className:"coll-img",children:e("img",{src:s.img,alt:""})})}),o("div",{className:"coll-title",children:[s.info?e("span",{children:s.info}):"",e("span",{children:s.title})]}),o("div",{className:"coll-info",children:[e("div",{className:"rank",children:s.rank?e("span",{children:s.rank}):""}),e("div",{className:"time",children:s.time?e("span",{children:s.time}):""})]}),e("div",{className:"coll-price",children:o("span",{children:["¥",s.price]})}),e(f,{to:"/vip",children:o("div",{className:"vip",children:[e("span",{children:"会员购"}),e("span",{children:"去逛逛 > "})]})}),e(O,{className:"pop",onClick:()=>{n(!0)}}),o($,{visible:r,onMaskClick:()=>{n(!1)},bodyStyle:{height:"7.6rem"},children:[e("div",{className:"share-btn",onClick:l,children:e("span",{children:"分享"})}),e("div",{className:"cancle-coll",onClick:()=>p(s.id),children:e("span",{children:"取消收藏"})}),e("div",{className:"bottom",onClick:()=>{n(!1)},children:e("span",{children:"取消"})})]}),e(F,{visible:d,setVisible:a})]})};const K=()=>e(N,{}),N=()=>o("div",{className:"nothing",children:[e("img",{src:P,alt:""}),e("p",{children:"╮(╯﹏╰）╭再怎么找也没有啦"})]}),g=()=>o("div",{className:"other",children:[e("span",{children:"你可能还喜欢"}),e("p",{})]}),z=s=>{const{goodsList:t,enterLoading:r,collectGoodsList:n}=s,{getGoodListDispatch:d,addDispatch:a,delDispatch:l}=s,[p,m]=c.useState(!0),[C,L]=c.useState([]),[u,S]=c.useState(0),k=M();c.useEffect(()=>{d()},[]);async function b(){return u>=5?[]:(await w(1e3),S(i=>i+1),t.map(i=>u>=1?{...i,id:i.id+=t.length}:{...i}))}async function G(){const i=await b();L(T=>[...T,...i]),m(i.length>0)}return o("div",{className:"collect-container",children:[o("div",{className:"header",children:[e("i",{className:"iconfont icon-fanhuijiantou",onClick:()=>k(-1)}),e("span",{children:"我的收藏"})]}),o(h,{defaultActiveKey:"goods",children:[o(h.Tab,{title:"视频",children:[e(K,{}),e(g,{})]},"videos"),o(h.Tab,{title:"商品",children:[n.length>0?e(v,{children:n.map(i=>e(I,{data:i,delDispatch:l},i.id))}):e(N,{}),e(g,{}),r?e(j.Paragraph,{lineCount:20,animated:!0}):o(v,{children:[e(H,{goodData:C,addDispatch:a,delDispatch:l}),e(q,{loadMore:G,hasMore:p})]}),e(A,{top:3e3})]},"goods")]})]})},B=s=>({enterLoading:s.vip.enterLoading,goodsList:s.vip.goodsList,collectGoodsList:s.vip.collectGoodsList}),J=s=>({getGoodListDispatch(){s(E())},addDispatch(t){s(R(t))},delDispatch(t){s(V(t))}}),pe=y(B,J)(x.memo(z));export{pe as default};
