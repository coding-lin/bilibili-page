import{r as a,d as o,j as e,L as v,T as b,c as G,R as E,u as T,F as f,V as y,m as B}from"./index.b398f1f6.js";import{S as M}from"./index.8156a4b9.js";import{T as m}from"./index.28b4b065.js";import{a as P,b as w,d as A}from"./actionCreators.5f7b93cc.js";import{P as j}from"./index.45d2cf4b.js";import{S as V}from"./index.1e30ce69.js";import{M as R}from"./MoreOutline.d597468d.js";import{N as $,S as O}from"./index.42f9fd4c.js";import{G as q}from"./index.48017982.js";import"./attach-properties-to-component.6acef87d.js";import"./index.8af38bc8.js";import"./index.b9288a6b.js";import"./use-isomorphic-update-layout-effect.1c6a9f15.js";import"./request.c329a291.js";import"./index.8e3114f4.js";import"./index.7c071fbb.js";import"./index.c6562f1a.js";import"./bilibili.03841b80.js";const H=({data:s,delDispatch:t})=>{const[l,n]=a.exports.useState(!1),[d,c]=a.exports.useState(!1),r=()=>{n(!1),c(!0)},u=async p=>{await t(p),b.show({content:"\u53D6\u6D88\u6536\u85CF\u6210\u529F",position:"bottom"}),n(!1)};return o("div",{className:"coll-container",children:[e(v,{to:`/vip/good/${s.id}`,children:e("div",{className:"coll-img",children:e("img",{src:s.img,alt:""})})}),o("div",{className:"coll-title",children:[s.info?e("span",{children:s.info}):"",e("span",{children:s.title})]}),o("div",{className:"coll-info",children:[e("div",{className:"rank",children:s.rank?e("span",{children:s.rank}):""}),e("div",{className:"time",children:s.time?e("span",{children:s.time}):""})]}),e("div",{className:"coll-price",children:o("span",{children:["\xA5",s.price]})}),e(v,{to:"/vip",children:o("div",{className:"vip",children:[e("span",{children:"\u4F1A\u5458\u8D2D"}),e("span",{children:"\u53BB\u901B\u901B > "})]})}),e(R,{className:"pop",onClick:()=>{n(!0)}}),o(j,{visible:l,onMaskClick:()=>{n(!1)},bodyStyle:{height:"7.6rem"},children:[e("div",{className:"share-btn",onClick:r,children:e("span",{children:"\u5206\u4EAB"})}),e("div",{className:"cancle-coll",onClick:()=>u(s.id),children:e("span",{children:"\u53D6\u6D88\u6536\u85CF"})}),e("div",{className:"bottom",onClick:()=>{n(!1)},children:e("span",{children:"\u53D6\u6D88"})})]}),e(V,{visible:d,setVisible:c})]})};const I=()=>e(C,{}),C=()=>o("div",{className:"nothing",children:[e("img",{src:y,alt:""}),e("p",{children:"\u256E(\u256F\uFE4F\u2570\uFF09\u256D\u518D\u600E\u4E48\u627E\u4E5F\u6CA1\u6709\u5566"})]}),g=()=>o("div",{className:"other",children:[e("span",{children:"\u4F60\u53EF\u80FD\u8FD8\u559C\u6B22"}),e("p",{})]}),K=s=>{const{goodsList:t,enterLoading:l,collectGoodsList:n}=s,{getGoodListDispatch:d,addDispatch:c,delDispatch:r}=s,[u,p]=a.exports.useState(!0),[D,N]=a.exports.useState([]),[h,F]=a.exports.useState(0),L=T();a.exports.useEffect(()=>{d()},[]);async function S(){return h>=5?[]:(await B(1e3),F(i=>i+1),t.map(i=>h>=1?{...i,id:i.id+=t.length}:{...i}))}async function k(){const i=await S();N(x=>[...x,...i]),p(i.length>0)}return o("div",{className:"collect-container",children:[o("div",{className:"header",children:[e("i",{className:"iconfont icon-fanhuijiantou",onClick:()=>L(-1)}),e("span",{children:"\u6211\u7684\u6536\u85CF"})]}),o(m,{defaultActiveKey:"goods",children:[o(m.Tab,{title:"\u89C6\u9891",children:[e(I,{}),e(g,{})]},"videos"),o(m.Tab,{title:"\u5546\u54C1",children:[n.length>0?e(f,{children:n.map(i=>e(H,{data:i,delDispatch:r},i.id))}):e(C,{}),e(g,{}),l?e(M.Paragraph,{lineCount:20,animated:!0}):o(f,{children:[e(q,{goodData:D,addDispatch:c,delDispatch:r}),e($,{loadMore:k,hasMore:u})]}),e(O,{top:3e3})]},"goods")]})]})},z=s=>({enterLoading:s.vip.enterLoading,goodsList:s.vip.goodsList,collectGoodsList:s.vip.collectGoodsList}),J=s=>({getGoodListDispatch(){s(P())},addDispatch(t){s(w(t))},delDispatch(t){s(A(t))}});var ue=G(z,J)(E.memo(K));export{ue as default};
