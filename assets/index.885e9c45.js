import{r as u,m as H,n as X,o as q,q as $,t as w,v as z,w as F,x as M,y as O,z as j,j as s,A as V,B as Y,D as J,d as L,F as P,e as K}from"./index.8404c549.js";var W=function(e){return typeof e=="function"},Q=!1,A=Q;function B(e){var r=u.exports.useRef(e);return r.current=e,r}var Z=function(e){A&&(W(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var r=B(e);u.exports.useEffect(function(){return function(){r.current()}},[])},ee=Z,re=H,te=function(){return re.Date.now()},ne=te,ie=/\s/;function oe(e){for(var r=e.length;r--&&ie.test(e.charAt(r)););return r}var ae=oe,se=ae,ce=/^\s+/;function le(e){return e&&e.slice(0,se(e)+1).replace(ce,"")}var ue=le,fe=X,de=q,me="[object Symbol]";function ve(e){return typeof e=="symbol"||de(e)&&fe(e)==me}var he=ve,ge=ue,_=$,pe=he,C=0/0,xe=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,be=/^0o[0-7]+$/i,Te=parseInt;function Se(e){if(typeof e=="number")return e;if(pe(e))return C;if(_(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=_(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=ge(e);var t=ye.test(e);return t||be.test(e)?Te(e.slice(2),t?2:8):xe.test(e)?C:+e}var we=Se,Ee=$,I=ne,N=we,Ie="Expected a function",$e=Math.max,Re=Math.min;function ke(e,r,t){var i,o,c,l,n,f,v=0,T=!1,h=!1,p=!0;if(typeof e!="function")throw new TypeError(Ie);r=N(r)||0,Ee(t)&&(T=!!t.leading,h="maxWait"in t,c=h?$e(N(t.maxWait)||0,r):c,p="trailing"in t?!!t.trailing:p);function d(a){var g=i,b=o;return i=o=void 0,v=a,l=e.apply(b,g),l}function m(a){return v=a,n=setTimeout(x,r),T?d(a):l}function R(a){var g=a-f,b=a-v,k=r-g;return h?Re(k,c-b):k}function S(a){var g=a-f,b=a-v;return f===void 0||g>=r||g<0||h&&b>=c}function x(){var a=I();if(S(a))return y(a);n=setTimeout(x,R(a))}function y(a){return n=void 0,p&&i?d(a):(i=o=void 0,l)}function U(){n!==void 0&&clearTimeout(n),v=0,i=f=o=n=void 0}function G(){return n===void 0?l:y(I())}function E(){var a=I(),g=S(a);if(i=arguments,o=this,f=a,g){if(n===void 0)return m(f);if(h)return clearTimeout(n),n=setTimeout(x,r),d(f)}return n===void 0&&(n=setTimeout(x,r)),l}return E.cancel=U,E.flush=G,E}var Le=ke,_e=Le,Ce=$,Ne="Expected a function";function Fe(e,r,t){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(Ne);return Ce(t)&&(i="leading"in t?!!t.leading:i,o="trailing"in t?!!t.trailing:o),_e(e,r,{leading:i,maxWait:r,trailing:o})}var Me=Fe;function Oe(e){var r=this,t=u.exports.useRef(!1);return u.exports.useCallback(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return w(r,void 0,void 0,function(){var c,l;return z(this,function(n){switch(n.label){case 0:if(t.current)return[2];t.current=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.apply(void 0,F([],M(i),!1))];case 2:return c=n.sent(),t.current=!1,[2,c];case 3:throw l=n.sent(),t.current=!1,l;case 4:return[2]}})})},[e])}function je(e,r){var t;A&&(W(e)||console.error("useThrottleFn expected parameter is a function, got ".concat(typeof e)));var i=B(e),o=(t=r==null?void 0:r.wait)!==null&&t!==void 0?t:1e3,c=u.exports.useMemo(function(){return Me(function(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];return i.current.apply(i,F([],M(l),!1))},o,r)},[]);return ee(function(){c.cancel()}),{run:c,cancel:c.cancel,flush:c.flush}}const Pe="adm-dot-loading",We={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},Ae={color:"default"},Be=u.exports.memo(e=>{var r;const t=O(Ae,e);return j(t,s("div",{style:{color:(r=We[t.color])!==null&&r!==void 0?r:t.color},className:V("adm-loading",Pe),children:s("svg",{height:"1em",viewBox:"0 0 100 40",style:{verticalAlign:"-0.125em"},children:s("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:s("g",{transform:"translate(-100.000000, -71.000000)",children:s("g",{transform:"translate(95.000000, 71.000000)",children:s("g",{transform:"translate(5.000000, 0.000000)",children:[0,1,2].map(i=>s("rect",{fill:"currentColor",x:20+i*26,y:"16",width:"8",height:"8",rx:"2",children:s("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:`${i*.2}s`,repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1"})},i))})})})})})}))});var De=Be;function Ue(e){return e===window}const D="adm-infinite-scroll",Ge={threshold:250,children:(e,r,t)=>s(Xe,{hasMore:e,failed:r,retry:t})},He=e=>{const r=O(Ge,e),[t,i]=u.exports.useState(!1),o=Oe(d=>w(void 0,void 0,void 0,function*(){try{yield r.loadMore(d)}catch(m){throw i(!0),m}})),c=u.exports.useRef(null),[l,n]=u.exports.useState({}),f=u.exports.useRef(l),[v,T]=u.exports.useState(),{run:h}=je(()=>w(void 0,void 0,void 0,function*(){if(f.current!==l||!r.hasMore)return;const d=c.current;if(!d||!d.offsetParent)return;const m=Y(d);if(T(m),!m)return;const S=d.getBoundingClientRect().top;if((Ue(m)?window.innerHeight:m.getBoundingClientRect().bottom)>=S-r.threshold){const y={};f.current=y,yield o(!1),n(y)}}),{wait:100,leading:!0,trailing:!0});u.exports.useEffect(()=>{h()}),u.exports.useEffect(()=>{if(!c.current||!v)return;function m(){h()}return v.addEventListener("scroll",m),()=>{v.removeEventListener("scroll",m)}},[v]);function p(){return w(this,void 0,void 0,function*(){i(!1),yield o(!0),n(f.current)})}return j(r,s("div",{className:D,ref:c,children:typeof r.children=="function"?r.children(r.hasMore,t,p):r.children}))},Xe=e=>{const{locale:r}=J();return e.hasMore?e.failed?L("span",{children:[s("span",{className:`${D}-failed-text`,children:r.InfiniteScroll.failedToLoad}),s("a",{onClick:()=>{e.retry()},children:r.InfiniteScroll.retry})]}):L(P,{children:[s("span",{children:r.common.loading}),s(De,{})]}):s("span",{children:r.InfiniteScroll.noMore})};var ze=He;const Ve=()=>{const[e,r]=u.exports.useState(!1),t=K(()=>{(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0)>2e3?r(!0):r(!1)},100);return u.exports.useEffect(()=>(document.addEventListener("scroll",t,!0),()=>document.removeEventListener("scroll",t)),[e]),s(P,{children:e&&s("div",{className:"to-top",onClick:()=>window.scrollTo(0,0),children:s("i",{className:"iconfont icon-fanhuijiantou"})})})};export{De as D,ze as I,Ve as S};
