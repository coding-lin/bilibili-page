import{r as s,n as h,o as L,q as P,v as R,w as x,x as w,j as r,y as C,z as E,A as F,d as g,F as y,f as I}from"./index.e8af86ff.js";import{u as M}from"./index.be294718.js";function N(t){var e=this,n=s.exports.useRef(!1);return s.exports.useCallback(function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return h(e,void 0,void 0,function(){var d,u;return L(this,function(i){switch(i.label){case 0:if(n.current)return[2];n.current=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.apply(void 0,P([],R(o),!1))];case 2:return d=i.sent(),n.current=!1,[2,d];case 3:throw u=i.sent(),n.current=!1,u;case 4:return[2]}})})},[t])}const $="adm-dot-loading",j={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},_={color:"default"},A=s.exports.memo(t=>{var e;const n=x(_,t);return w(n,r("div",{style:{color:(e=j[n.color])!==null&&e!==void 0?e:n.color},className:C("adm-loading",$),children:r("svg",{height:"1em",viewBox:"0 0 100 40",style:{verticalAlign:"-0.125em"},children:r("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:r("g",{transform:"translate(-100.000000, -71.000000)",children:r("g",{transform:"translate(95.000000, 71.000000)",children:r("g",{transform:"translate(5.000000, 0.000000)",children:[0,1,2].map(o=>r("rect",{fill:"currentColor",x:20+o*26,y:"16",width:"8",height:"8",rx:"2",children:r("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:`${o*.2}s`,repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1"})},o))})})})})})}))});var B=A;function D(t){return t===window}const S="adm-infinite-scroll",W={threshold:250,children:(t,e,n)=>r(z,{hasMore:t,failed:e,retry:n})},q=t=>{const e=x(W,t),[n,o]=s.exports.useState(!1),a=N(c=>h(void 0,void 0,void 0,function*(){try{yield e.loadMore(c)}catch(l){throw o(!0),l}})),d=s.exports.useRef(null),[u,i]=s.exports.useState({}),m=s.exports.useRef(u),[f,T]=s.exports.useState(),{run:v}=M(()=>h(void 0,void 0,void 0,function*(){if(m.current!==u||!e.hasMore)return;const c=d.current;if(!c||!c.offsetParent)return;const l=E(c);if(T(l),!l)return;const k=c.getBoundingClientRect().top;if((D(l)?window.innerHeight:l.getBoundingClientRect().bottom)>=k-e.threshold){const p={};m.current=p,yield a(!1),i(p)}}),{wait:100,leading:!0,trailing:!0});s.exports.useEffect(()=>{v()}),s.exports.useEffect(()=>{if(!d.current||!f)return;function l(){v()}return f.addEventListener("scroll",l),()=>{f.removeEventListener("scroll",l)}},[f]);function b(){return h(this,void 0,void 0,function*(){o(!1),yield a(!0),i(m.current)})}return w(e,r("div",{className:S,ref:d,children:typeof e.children=="function"?e.children(e.hasMore,n,b):e.children}))},z=t=>{const{locale:e}=F();return t.hasMore?t.failed?g("span",{children:[r("span",{className:`${S}-failed-text`,children:e.InfiniteScroll.failedToLoad}),r("a",{onClick:()=>{t.retry()},children:e.InfiniteScroll.retry})]}):g(y,{children:[r("span",{children:e.common.loading}),r(B,{})]}):r("span",{children:e.InfiniteScroll.noMore})};var G=q;const J=({top:t})=>{const[e,n]=s.exports.useState(!1),o=I(()=>{(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0)>t?n(!0):n(!1)},100);return s.exports.useEffect(()=>(document.addEventListener("scroll",o,!0),()=>document.removeEventListener("scroll",o)),[e]),r(y,{children:e&&r("div",{className:"to-top",onClick:()=>window.scrollTo(0,0),children:r("i",{className:"iconfont icon-fanhuijiantou"})})})};export{B as D,G as I,J as S};
