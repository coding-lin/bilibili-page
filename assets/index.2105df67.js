import{r as h,v as ee,y as be,R as y,A as _e,a5 as we,a6 as ye,a7 as xe,X as te,a4 as x,$ as V,j as a,a8 as q,a9 as Ee,aa as Oe,w as ne,d as b,Z as re,a2 as ie,ab as oe,u as Ce,F as Re,a3 as Te}from"./index.6104a6e4.js";import{a as se}from"./attach-properties-to-component.6acef87d.js";import{b as Se}from"./index.8e0e7866.js";import{c as Me,u as Ae,g as X}from"./useEffectWithTarget.6afe69cd.js";import{i as Ie}from"./index.a0e78679.js";import{T as N}from"./index.135fe0a6.js";import{M as Ne}from"./MoreOutline.3a35fd9d.js";import{S as ze}from"./index.989e2aa8.js";import"./index.0286947d.js";import"./use-isomorphic-update-layout-effect.e2d4346b.js";function $e(e){var t=h.exports.useRef(0),n=ee(h.exports.useState(e),2),r=n[0],i=n[1],s=h.exports.useCallback(function(l){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){i(l)})},[]);return Se(function(){cancelAnimationFrame(t.current)}),[r,s]}var ae=function(){if(typeof Map!="undefined")return Map;function e(t,n){var r=-1;return t.some(function(i,s){return i[0]===n?(r=s,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(n,r){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,i=e(r,n);~i&&r.splice(i,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var l=s[i];n.call(r,l[1],l[0])}},t}()}(),H=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,P=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),De=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(P):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Pe=2;function Fe(e,t){var n=!1,r=!1,i=0;function s(){n&&(n=!1,e()),r&&c()}function l(){De(s)}function c(){var d=Date.now();if(n){if(d-i<Pe)return;r=!0}else n=!0,r=!1,setTimeout(l,t);i=d}return c}var ke=20,We=["top","right","bottom","left","width","height","size","weight"],Le=typeof MutationObserver!="undefined",je=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Fe(this.refresh.bind(this),ke)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!H||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Le?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!H||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,i=We.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ce=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},R=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||P},ue=W(0,0,0,0);function F(e){return parseFloat(e)||0}function Y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,i){var s=e["border-"+i+"-width"];return r+F(s)},0)}function Be(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var s=i[r],l=e["padding-"+s];n[s]=F(l)}return n}function Ze(e){var t=e.getBBox();return W(0,0,t.width,t.height)}function Ve(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return ue;var r=R(e).getComputedStyle(e),i=Be(r),s=i.left+i.right,l=i.top+i.bottom,c=F(r.width),d=F(r.height);if(r.boxSizing==="border-box"&&(Math.round(c+s)!==t&&(c-=Y(r,"left","right")+s),Math.round(d+l)!==n&&(d-=Y(r,"top","bottom")+l)),!Ge(e)){var u=Math.round(c+s)-t,f=Math.round(d+l)-n;Math.abs(u)!==1&&(c-=u),Math.abs(f)!==1&&(d-=f)}return W(i.left,i.top,c,d)}var He=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof R(e).SVGGraphicsElement}:function(e){return e instanceof R(e).SVGElement&&typeof e.getBBox=="function"}}();function Ge(e){return e===R(e).document.documentElement}function qe(e){return H?He(e)?Ze(e):Ve(e):ue}function Xe(e){var t=e.x,n=e.y,r=e.width,i=e.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,l=Object.create(s.prototype);return ce(l,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),l}function W(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Ye=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=W(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=qe(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Ke=function(){function e(t,n){var r=Xe(n);ce(this,{target:t,contentRect:r})}return e}(),Ue=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new ae,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof R(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new Ye(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof R(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new Ke(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),le=typeof WeakMap!="undefined"?new WeakMap:new ae,de=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=je.getInstance(),r=new Ue(t,n,this);le.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){de.prototype[e]=function(){var t;return(t=le.get(this))[e].apply(t,arguments)}});var Je=function(){return typeof P.ResizeObserver!="undefined"?P.ResizeObserver:de}(),Qe=Me(h.exports.useLayoutEffect),et=Qe,tt=Ie?et:Ae,nt=tt;function K(e){var t=ee($e(function(){var i=X(e);return i?{width:i.clientWidth,height:i.clientHeight}:void 0}),2),n=t[0],r=t[1];return nt(function(){var i=X(e);if(!!i){var s=new Je(function(l){l.forEach(function(c){var d=c.target,u=d.clientWidth,f=d.clientHeight;r({width:u,height:f})})});return s.observe(i),function(){s.disconnect()}}},[],e),n}const U="adm-safe-area",rt=e=>be(e,y.createElement("div",{className:_e(U,`${U}-position-${e.position}`)}));var fe=rt;const it=we([ye,xe]),j=()=>[1,0,0,1,0,0],J=e=>e[4],Q=e=>e[5],z=e=>e[0],$=(e,t,n)=>he([1,0,0,1,t,n],e),ot=(e,t,n=t)=>he([t,0,0,n,0,0],e),st=(e,[t,n])=>[e[0]*t+e[2]*n+e[4],e[1]*t+e[3]*n+e[5]],he=(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],B="adm-image-viewer",ve=e=>{const{dragLockRef:t,maxZoom:n}=e,r=h.exports.useRef(null),i=h.exports.useRef(null),[{matrix:s},l]=te(()=>({matrix:j(),config:{tension:200}})),c=K(r),d=K(i),u=h.exports.useRef(!1),f=(o,v,m=!1)=>{if(!c||!d)return o;const p=-c.width/2,_=-c.height/2,D=-d.width/2,L=-d.height/2,E=z(o),w=E*d.width,g=E*d.height,[O,C]=st(o,[D,L]);if(v==="translate"){let S=O,M=C;if(w>c.width){const A=p-(w-c.width),I=p;S=m?x(O,A,I):q(O,A,I,E*50)}else S=-w/2;if(g>c.height){const A=_-(g-c.height),I=_;M=m?x(C,A,I):q(C,A,I,E*50)}else M=-g/2;return $(o,S-O,M-C)}if(v==="scale"&&m){const[S,M]=[w>c.width?x(O,p-(w-c.width),p):-w/2,g>c.height?x(C,_-(g-c.height),_):-g/2];return $(o,S-O,M-C)}return o};return it({onDrag:o=>{if(o.first)return;if(o.pinching)return o.cancel();if(o.tap&&o.elapsedTime>0&&o.elapsedTime<1e3){e.onTap();return}const v=z(s.get());if(t&&(t.current=v!==1),!u.current&&v<=1)l.start({matrix:j()});else{const m=s.get(),p=[o.offset[0]-J(m),o.offset[1]-Q(m)],_=$(m,...o.last?[p[0]+o.velocity[0]*o.direction[0]*200,p[1]+o.velocity[1]*o.direction[1]*200]:p);l.start({matrix:f(_,"translate",o.last),immediate:!o.last})}},onPinch:o=>{var v;u.current=!o.last;const[m]=o.offset;if(m<0)return;let p;n==="auto"?p=c&&d?Math.max(c.height/d.height,c.width/d.width):1:p=n;const _=o.last?x(m,1,p):m;if((v=e.onZoomChange)===null||v===void 0||v.call(e,_),o.last&&_<=1)l.start({matrix:j()}),t&&(t.current=!1);else{if(!c)return;const D=s.get(),L=z(D),E=o.origin[0]-c.width/2,w=o.origin[1]-c.height/2;let g=$(D,-E,-w);g=ot(g,_/L),g=$(g,E,w),l.start({matrix:f(g,"scale",o.last),immediate:!o.last}),t&&(t.current=!0)}}},{target:r,drag:{from:()=>[J(s.get()),Q(s.get())],pointer:{touch:!0}},pinch:{from:()=>[z(s.get()),0],pointer:{touch:!0}}}),y.createElement("div",{className:`${B}-slide`,onPointerMove:o=>{z(s.get())!==1&&o.stopPropagation()}},y.createElement("div",{className:`${B}-control`,ref:r},y.createElement(V.div,{className:`${B}-image-wrapper`,style:{matrix:s}},a("img",{ref:i,src:e.image,draggable:!1,alt:e.image}))))},Z="adm-image-viewer",at=h.exports.forwardRef((e,t)=>{const n=window.innerWidth+Ee(16),[{x:r},i]=te(()=>({x:e.defaultIndex*n,config:{tension:250,clamp:!0}})),s=e.images.length;function l(u,f=!1){var o;const v=x(u,0,s-1);(o=e.onIndexChange)===null||o===void 0||o.call(e,v),i.start({x:v*n,immediate:f})}h.exports.useImperativeHandle(t,()=>({swipeTo:l}));const c=h.exports.useRef(!1),d=Oe(u=>{if(c.current)return;const[f]=u.offset;if(u.last){const o=Math.floor(f/n),v=o+1,m=Math.min(u.velocity[0]*2e3,n)*u.direction[0];l(x(Math.round((f+m)/n),o,v))}else i.start({x:f,immediate:!0})},{transform:([u,f])=>[-u,f],from:()=>[r.get(),0],bounds:()=>({left:0,right:(s-1)*n}),rubberband:!0,axis:"x",pointer:{touch:!0}});return y.createElement("div",Object.assign({className:`${Z}-slides`},d()),y.createElement(V.div,{className:`${Z}-indicator`},r.to(u=>`${x(Math.round(u/n),0,s-1)+1} / ${s}`)),y.createElement(V.div,{className:`${Z}-slides-inner`,style:{x:r.to(u=>-u)}},e.images.map((u,f)=>a(ve,{image:u,onTap:e.onTap,maxZoom:e.maxZoom,onZoomChange:o=>{if(o!==1){const v=Math.round(r.get()/n);i.start({x:v*n})}},dragLockRef:c},f))))}),k="adm-image-viewer",me={maxZoom:3,getContainer:null,visible:!1},pe=e=>{var t;const n=ne(me,e),r=b(re,{visible:n.visible,disableBodyScroll:!1,opacity:"thick",afterClose:n.afterClose,destroyOnClose:!0,children:[a("div",{className:`${k}-content`,children:n.image&&a(ve,{image:n.image,onTap:()=>{var i;(i=n.onClose)===null||i===void 0||i.call(n)},maxZoom:n.maxZoom})}),n.image&&b("div",{className:`${k}-footer`,children:[(t=n.renderFooter)===null||t===void 0?void 0:t.call(n,n.image),a(fe,{position:"bottom"})]})]});return ie(n.getContainer,r)},ct=Object.assign(Object.assign({},me),{defaultIndex:0}),ge=h.exports.forwardRef((e,t)=>{var n;const r=ne(ct,e),[i,s]=h.exports.useState(r.defaultIndex),l=h.exports.useRef(null);h.exports.useImperativeHandle(t,()=>({swipeTo:(u,f)=>{var o;s(u),(o=l.current)===null||o===void 0||o.swipeTo(u,f)}}));const c=h.exports.useCallback(u=>{var f;s(u),(f=r.onIndexChange)===null||f===void 0||f.call(r,u)},[r.onIndexChange]),d=b(re,{visible:r.visible,disableBodyScroll:!1,opacity:"thick",afterClose:r.afterClose,destroyOnClose:!0,children:[a("div",{className:`${k}-content`,children:r.images&&a(at,{ref:l,defaultIndex:i,onIndexChange:c,images:r.images,onTap:()=>{var u;(u=r.onClose)===null||u===void 0||u.call(r)},maxZoom:r.maxZoom})}),r.images&&b("div",{className:`${k}-footer`,children:[(n=r.renderFooter)===null||n===void 0?void 0:n.call(r,r.images[i],i),a(fe,{position:"bottom"})]})]});return ie(r.getContainer,d)}),T=new Set;function ut(e){G();const t=oe(y.createElement(pe,Object.assign({},e,{afterClose:()=>{var n;T.delete(t),(n=e.afterClose)===null||n===void 0||n.call(e)}})));return T.add(t),t}function lt(e){G();const t=oe(y.createElement(ge,Object.assign({},e,{afterClose:()=>{var n;T.delete(t),(n=e.afterClose)===null||n===void 0||n.call(e)}})));return T.add(t),t}function G(){T.forEach(e=>{e.close()}),T.clear()}const dt=se(ge,{show:lt});var ft=se(pe,{Multi:dt,show:ut,clear:G});const Et=()=>{const e=Ce(),[t,n]=h.exports.useState(!1),[r,i]=h.exports.useState(!1),[s,l]=h.exports.useState(!1);return b(Re,{children:[a("div",{className:"back-icon",children:a("i",{className:"iconfont icon-fanhuijiantou",onClick:()=>e(-1)})}),a("div",{className:"sousuo-icon",onClick:()=>{i(!0)},children:a("i",{className:"iconfont icon-sousuo"})}),a(ft,{image:"https://img01.anzhiy.cn/useruploads/113/2023/03/31/642688586e8a9.jpg",visible:r,onClose:()=>{i(!1)}}),a(Ne,{className:"share",onClick:()=>{n(!0)}}),a("div",{className:"bg-img",children:a("img",{src:"https://img01.anzhiy.cn/useruploads/113/2023/03/30/64254aee57d84.jpg",alt:""})}),b("div",{className:"info",children:[a("div",{className:"avatar",children:a("img",{src:Te,alt:""})}),b("div",{className:"detail",children:[b("div",{children:[a("span",{className:"data",children:"1"}),a("p",{children:"\u7C89\u4E1D"})]}),b("div",{children:[a("span",{children:"34"}),a("p",{children:"\u5173\u6CE8"})]}),b("div",{children:[a("span",{children:"10"}),a("p",{children:"\u83B7\u8D5E"})]})]}),a("div",{className:"edit",onClick:()=>e("/mine/edit"),children:a("span",{children:"\u7F16\u8F91\u8D44\u6599"})}),a("div",{className:"username",children:a("span",{children:"dafenqi616"})}),a("div",{className:"vip",children:a("img",{src:"https://img01.anzhiy.cn/useruploads/113/2023/03/30/64259d5d149e7.png",alt:""})}),b("div",{className:"schlool",children:[a("img",{src:"https://img01.anzhiy.cn/useruploads/113/2023/03/30/64259ca543116.png",alt:""}),a("span",{onClick:()=>l(!s),children:s?"\u6536\u8D77":"\u8BE6\u60C5"})]}),s?a("div",{className:"details",children:a("span",{children:"\u70ED\u7231\u751F\u6D3B \u8BB0\u5F97\u5FEB\u4E50"})}):""]}),b(N,{defaultActiveKey:"home",children:[a(N.Tab,{title:"\u4E3B\u9875",children:"\u4E3B\u9875"},"home"),a(N.Tab,{title:"\u52A8\u6001",children:"\u52A8\u6001"},"trends"),a(N.Tab,{title:"\u6295\u7A3F",children:"\u6295\u7A3F"},"contribute"),a(N.Tab,{title:"\u6536\u85CF",children:"\u6536\u85CF"},"collect")]}),a(ze,{visible:t,setVisible:n})]})};export{Et as default};
