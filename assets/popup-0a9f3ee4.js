import{r as n,W as g,ad as w,o as f,a5 as h,a4 as P,K as O,a6 as R,w as S,R as p,j as i,X as $,N as B,a7 as E,$ as N,Y as j}from"./index-1f87f03b.js";var M=!!(typeof window<"u"&&window.document&&window.document.createElement);const _=M;var x=_?n.useLayoutEffect:n.useEffect;const m=x,I={closeOnMaskClick:!1,destroyOnClose:!1,disableBodyScroll:!0,forceRender:!1,getContainer:()=>document.body,mask:!0,showCloseButton:!1,stopPropagation:["click"],visible:!1};function L(t){const[e,r]=n.useState(t);return m(()=>{r(t)},[t]),e}const l="adm-popup",V=Object.assign(Object.assign({},I),{position:"bottom"}),K=t=>{const e=g(V,t),{locale:r}=w(),b=f(`${l}-body`,e.bodyClassName,`${l}-body-position-${e.position}`),[a,d]=n.useState(e.visible);m(()=>{e.visible&&d(!0)},[e.visible]);const u=n.useRef(null);h(u,e.disableBodyScroll&&a?"strict":!1);const v=P(),{percent:C}=O({percent:e.visible?0:100,config:{precision:.1,mass:.4,tension:300,friction:30},onRest:()=>{var s,o;v.current||(d(e.visible),e.visible?(s=e.afterShow)===null||s===void 0||s.call(e):(o=e.afterClose)===null||o===void 0||o.call(e))}}),y=L(a&&e.visible),k=R(e.stopPropagation,S(e,p.createElement("div",{className:l,onClick:e.onClick,style:{display:a?void 0:"none"}},e.mask&&i($,{visible:y,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose,onMaskClick:s=>{var o,c;(o=e.onMaskClick)===null||o===void 0||o.call(e,s),e.closeOnMaskClick&&((c=e.onClose)===null||c===void 0||c.call(e))},className:e.maskClassName,style:e.maskStyle,disableBodyScroll:!1,stopPropagation:e.stopPropagation}),p.createElement(B.div,{className:b,style:Object.assign(Object.assign({},e.bodyStyle),{transform:C.to(s=>e.position==="bottom"?`translate(0, ${s}%)`:e.position==="top"?`translate(0, -${s}%)`:e.position==="left"?`translate(-${s}%, 0)`:e.position==="right"?`translate(${s}%, 0)`:"none")}),ref:u},e.showCloseButton&&i("a",{className:f(`${l}-close-icon`,"adm-plain-anchor"),onClick:()=>{var s;(s=e.onClose)===null||s===void 0||s.call(e)},role:"button","aria-label":r.common.close,children:i(E,{})}),e.children))));return i(N,{active:a,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose,children:j(e.getContainer,k)})};export{K as P,L as a,I as d,_ as i,m as u};
